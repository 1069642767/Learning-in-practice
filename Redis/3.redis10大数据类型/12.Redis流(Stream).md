# Redis流(Stream)

### 是什么

Redis5.0 之前的痛点，Redis消息队列的2种方案：

1. List实现消息队列，List实现方式其实就是点对点的模式

   ![](images/78.List实现消息队列.png)

2. Pub/Sub

![](images/79.pub、sub.png)

Redis5.0版本新增了一个更强大的数据结构---Stream

一句话：Stream流就是Redis版的MQ消息中间件+阻塞队列

### 能干嘛

实现消息队列，它支持消息的持久化、支持自动生成全局唯一ID、支持ack确认消息的模式、支持消费组模式等，让消息队列更加的稳定和可靠

### 底层结构和原理说明

![](images/80.stream结构.png)

$\textcolor{blue}{一个消息链表，将所有加入的消息都串起来，每个消息都有一个唯一的ID和对应的内容}$

![](images/81.stream消息队列.png)

### 基本命令理论简介

##### 队列相关指令

![](images/82.队列相关指令.png)

##### 消费组相关指令

![](images/83.消费组相关指令.png)

XINFO GROUPS    打印消费组的详细信息

XINFO STREAM     打印stream的详细信息

##### 四个特殊符号

| - +  | 最小和最大可能出现的Id                             |
| ---- | ---------------------------------------- |
| $    | $表示只消费新的消息，当前流中最大的Id，可用于将要到来的信息          |
| >    | 用于XREADGROUP命令，表示迄今还没有发送给组中使用者的信息，会更新消费者组的最后Id |
| *    | 用于XADD命令，让系统自动生成Id                       |





