# 手写分布式锁思路分析2023

<font color = 'red'>上述笔记代码的不足
</font>

1. 初始化版本简单添加

   业务类，将上面7777的业务逻辑代码原样拷贝到8888，加上synchronized或者Lock

2. nginx分布式微服务架构

   - v2.0版本代码分布式部署后，单机锁还是出现超卖现象，需要分布式锁

     ![](images/3.nginx负载均衡.png)

   - Nginx配置负载均衡

     - 命令地址+配置地址

       命令地址：/usr/local/nginx/sbin

       配置地址：/usr/local/nginx/conf

     - 启动

       /usr/local/nginx/sbin	执行./nginx

       启动Nginx并测试通过，浏览器看到Nginx欢迎welcome页面

     - /usr/local/nginx/conf目录下修改配置文件nginx.conf新增反向代理和负载均衡配置

       ![](images/5.Nginx配置负载均衡.png)

     - 关闭

       /usr/local/nginx/sbin  执行./nginx -s stop

     - 指定配置启动

       在/usr/local/nginx/sbin 路径下执行命令 ./nginx -c nginx.conf全路径

       ![](images/4.Nginx启动指定配置文件.png)

     - 重启

       在/usr/local/nginx/sbin  执行./nginx -s reload

   - 

     

3. 

