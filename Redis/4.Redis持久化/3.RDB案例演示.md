# RDB案例演示

### 需求说明

![](images/3.需求说明.jpg)

$\textcolor{red}{配置文件}$(6 VS 7)

Redis6.0.16及以下

![](images/4.RDB6.0.16及以下配置1.jpg)

![](images/5.RDB6.0.16及以下配置2.jpg.jpg)

Redis6.2以及Redis-7.0.0

![](images/6.RDB7配置.jpg)

### 操作步骤

![](images/7.RDB触发方式.jpg)

**自动触发**

Redis7版本，按照redis.conf里配置的 save <seconds> <changes>

**本次案例5秒2次修改**

![](images/8.5s内修改2次.png)

**修改dump文件保存路径**

![](images/9.dump文件路径.png)

**修改dump文件名称**

![](images/10.RDB修改备份文件名.png)

**触发备份**

第一种情况，5秒内保存2次

![](images/11.触发备份1.png)

第二种情况，两次保存间隔5秒

![](images/12.触发备份2.png)

**如何恢复**

将备份文件(dump.rdb)移动到 Redis 安装目录并启动服务即可

备份成功后故意用flushdb清空redis，看看是否可以恢复数据

- 执行flushall/flushdb命令也会产生dump.rdb文件，但里面是空的，无意义

物理恢复，一定要将服务产生的RDB文件备份一份，然后分机隔离，避免生产上物理损坏后备份文件也挂了。



