# Thread，ThreadLocal，ThreadLocalMap关系

### Thread和ThreadLocal

![image-20230719215848019](images/3.ThreadLocal对象.png)

再次体会，各自线程，人手一份

### ThreadLocal和ThreadLocalMap

![image-20230719220159536](images/4.ThreadLocalMap是ThreadLocal的静态内部类.png)

### 三者总概括

![image-20230719220455818](images/5.三者关系.png)

threadLocalMap实际上就是一个以threadLocal实例为key，任意对象为value的Entry对象。

```java
void createMap(Thread t, T firstValue) {
	t.threadLocals = new ThreadLocalMap(firstKey: this, firstValue);
}
```

当我们为threadLocal变量赋值，实际上就是以当前threadLocal实例为key，值为value的Entry往这个threaoLooallMao中存放





