# 多线程访问情况，3种

只有一个线程来访问，有且唯一Only One

有多个线程(2个线程A、B来交替访问）

竞争激烈，更多个线程来访问

# 升级流程

### synchronized用的锁是存在Java对象头里的Mark Word中，锁升级功能主要依赖MarkWord中锁标志位和释放偏向锁标志位

### 64位标记图再看

![image-20230730102231984](images/9.64位图.png)

### 锁指向，请牢记

偏向锁：MarkWord存储的是偏向的线程ID；

轻量锁：MarkWord存储的是指向线程栈中Lock Record的指针；

重量锁：MarkWord存储的是指向堆中的monitor对象的指针；

# 无锁

无锁：初始状态，一个对象被实例化后，如果还没有被任何线程竞争锁，那么它就为无锁状态（001）

![image-20230730141142967](images/10.无锁.png)
